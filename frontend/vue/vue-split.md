# vue 组件拆分指南

## Why?

拆分代码的主要目的是组件复用，但并不代表无复用性的代码不需要拆分成单独的组件，如果不拆分，那我们将会得到一个十分臃肿的组件，这样的组件在维护和新增功能时，将会带来极其恶心的开发体验。

在此，总结几点针对于无复用性代码拆分组件的理由：

1. 每个 vue 文件负责了更小的功能，即单一职责
2. 在团队开发时，可以极大程序的避免代码冲突（当 vue 文件中有拥有十分繁多的功能，可能需要多人维护，此时同时修改一个文件，经常会造成代码冲突）
3. 每个 vue 文件更小，更利于阅读和维护
4. 在命名时，由于每个 vue 文件功能单一，在 data/computed/methods ... 添加新属性时基本不用考虑名称占用的问题
5. 拆分之后，可以更好的优化现有代码（当一个 vue 文件中代码量非常大的时候，开发人员在维护和增加新功能时写的代码也会比较随意）
6. 拆分之后，我们开发时就可以更加专注的编码，而专注带来的好处就是效率极高
7. 保护视力和心情
...

**拆分带来的好处十分多，最重要的是拆分之后可以得到高质量的代码和愉悦的开发体验**

## How?

在开发过程中，我们应该如何去拆分 vue 文件中的代码呢？

了解以下几个概念：

### 视图组件

它是最简单的组件类型，功能仅仅是数据展示，这种可以定义为 `functional component`。

这种组件没有状态，即没有响应式数据，它仅通过 prop 接收一些数据，然后展示出来。

可以将它标记为 `functional: true`

### 业务逻辑

script 中大部分都是业务逻辑，我们可以将其拆分为单独的 [name].service.js，这样做的直观好处就是减轻了 view 层，另一方面就是解耦了业务逻辑和页面的强依赖，如果其他页面也有相同的逻辑，[name].service.js 就可以复用。

### 数据转换

有时从后台接口得到的数据并不能直接应用于前端的页面展示，此时我们可以为每个接口建立一个 `transformer` 函数，从后台请求来的数据先经过 transformer` 函数转换为前端直接能用的数据结构，并在必要的属性上添加适当的默认值防止报错。


### 总结

尽量让每个 vue 文件中只存在一个细粒度的功能，最后在再 view 层组合这些小组件来完成最终的页面展示。